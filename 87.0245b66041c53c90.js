"use strict";(self.webpackChunkangular_practice_exercise=self.webpackChunkangular_practice_exercise||[]).push([[87],{8087:(rt,M,n)=>{n.r(M),n.d(M,{BlogModule:()=>et});var g=n(9808),r=n(5620),p=n(6642),h=n(9291),m=n(9646);const P=(0,r.PH)("[Blog] Load Posts"),v=(0,r.PH)("[Blog] Load Posts Success",(0,r.Ky)()),y=(0,r.PH)("[Blog] Load Posts Failure",(0,r.Ky)()),S=(0,r.PH)("[Blog] Load Post",(0,r.Ky)()),B=(0,r.PH)("[Blog] Load Post Success",(0,r.Ky)()),Z=(0,r.PH)("[Blog] Load Post Failure",(0,r.Ky)()),U=(0,r.PH)("[Blog] Search",(0,r.Ky)()),x=(0,r.PH)("[Blog] Search Success",(0,r.Ky)()),Y=(0,r.Lq)({posts:[],currentPost:null,errorMessage:null},(0,r.on)(P,s=>Object.assign(Object.assign({},s),{posts:[],currentPost:null,errorMessage:null})),(0,r.on)(v,(s,e)=>Object.assign(Object.assign({},s),{posts:e.posts,currentPost:null,errorMessage:null})),(0,r.on)(y,(s,e)=>Object.assign(Object.assign({},s),{posts:[],currentPost:null,errorMessage:e.error})),(0,r.on)(B,(s,e)=>Object.assign(Object.assign({},s),{currentPost:e.currentPost})),(0,r.on)(Z,(s,e)=>Object.assign(Object.assign({},s),{currentPost:null,errorMessage:e.error})),(0,r.on)(Z,(s,e)=>Object.assign(Object.assign({},s),{currentPost:null,errorMessage:e.error})),(0,r.on)(x,(s,e)=>Object.assign(Object.assign({},s),{posts:e.posts,currentPost:null,errorMessage:""}))),L="blog",C=(0,r.ZF)(L),K=(0,r.P1)(C,s=>s.posts),N=(0,r.P1)(C,s=>s.currentPost),$=(0,r.P1)(C,s=>s.errorMessage);var F=n(5577),T=n(4004),O=n(262),z=n(4128),t=n(5e3),D=n(2340),E=n(520);let A=(()=>{class s{constructor(o){this.http=o,this.apiUrl=D.N.apiUrl}getPosts(){return this.http.get(`${this.apiUrl}/posts`)}getPostComments(){return this.http.get(`${this.apiUrl}/comments`)}}return s.\u0275fac=function(o){return new(o||s)(t.LFG(E.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),G=(()=>{class s{constructor(o,c){this.actions$=o,this.postService=c,this.loadPosts$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(P),(0,F.z)(()=>this.postService.getPosts().pipe((0,T.U)(u=>v({posts:u})),(0,O.K)(u=>(0,m.of)(y(u))))))),this.loadPost$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(S),(0,F.z)(u=>(0,z.D)({posts:this.postService.getPosts(),comments:this.postService.getPostComments(),postId:(0,m.of)(u.id)}).pipe((0,T.U)(a=>{let d=a.posts.find(j=>j.id===a.postId)||null,f=a.comments.filter(j=>j.postId===a.postId);return d&&f.length>0&&(d.comments=f),B({currentPost:d})}),(0,O.K)(a=>(0,m.of)(Z(a))))))),this.search$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(U),(0,F.z)(u=>this.postService.getPosts().pipe((0,T.U)(a=>{const d=a.filter(f=>f.title.startsWith(u.searchTerm));return v({posts:d})}),(0,O.K)(a=>(0,m.of)(y(a)))))))}}return s.\u0275fac=function(o){return new(o||s)(t.LFG(p.eX),t.LFG(A))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var I=n(4423),i=n(3075),b=n(7322),H=n(7531);let Q=(()=>{class s{constructor(o,c){this.fb=o,this.store=c,this.searchForm=new i.cw({})}get searchTerm(){return this.searchForm.get("searchTerm")}ngOnInit(){this.searchForm=this.fb.group({searchTerm:this.fb.control("")})}search(){var o;this.store.dispatch(U({searchTerm:null===(o=this.searchTerm)||void 0===o?void 0:o.value}))}}return s.\u0275fac=function(o){return new(o||s)(t.Y36(i.qu),t.Y36(r.yh))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-search-posts"]],decls:5,vars:1,consts:[["autocomplete","off","novalidate","",3,"formGroup"],["matInput","","type","text","formControlName","searchTerm",3,"keyup"]],template:function(o,c){1&o&&(t.TgZ(0,"form",0)(1,"mat-form-field")(2,"mat-label"),t._uU(3,"Search: "),t.qZA(),t.TgZ(4,"input",1),t.NdJ("keyup",function(){return c.search()}),t.qZA()()()),2&o&&t.Q6J("formGroup",c.searchForm)},directives:[i._Y,i.JL,i.sg,b.KE,b.hX,H.Nt,i.Fj,i.JJ,i.u],styles:[""]}),s})();var l=n(9224);const X=function(s){return["/posts",s]};function R(s,e){if(1&s&&(t.TgZ(0,"mat-card",4)(1,"mat-card-title"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-content"),t._UZ(4,"img",5),t._uU(5),t.qZA()()),2&s){const o=e.$implicit;t.Q6J("routerLink",t.VKq(3,X,o.id)),t.xp6(2),t.hij(" ",o.title," "),t.xp6(3),t.hij(" ",o.body," ")}}function W(s,e){if(1&s&&(t.TgZ(0,"div",6),t._uU(1),t.qZA()),2&s){const o=e.ngIf;t.xp6(1),t.hij(" ",o," ")}}function q(s,e){if(1&s&&(t.TgZ(0,"mat-card",8)(1,"mat-card-title"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-content"),t._uU(6),t.qZA()()),2&s){const o=e.$implicit;t.xp6(2),t.hij(" ",o.name," "),t.xp6(2),t.hij(" ",o.email," "),t.xp6(2),t.hij(" ",o.body," ")}}function w(s,e){if(1&s&&(t.TgZ(0,"div"),t._UZ(1,"app-toolbar",2),t.TgZ(2,"div",3)(3,"mat-card",4)(4,"mat-card-content"),t._UZ(5,"img",5),t._uU(6),t.qZA()(),t.TgZ(7,"div",6)(8,"h1"),t._uU(9,"Comments"),t.qZA(),t.YNc(10,q,7,3,"mat-card",7),t.qZA()()()),2&s){const o=e.ngIf;t.xp6(1),t.Q6J("title",o.title),t.xp6(5),t.hij(" ",null==o?null:o.body," "),t.xp6(4),t.Q6J("ngForOf",null==o?null:o.comments)}}function k(s,e){if(1&s&&(t.TgZ(0,"div",9),t._uU(1),t.qZA()),2&s){const o=e.ngIf;t.xp6(1),t.hij(" ",o," ")}}const _=[{path:"",component:(()=>{class s{constructor(o){this.store=o,this.posts$=(0,m.of)([]),this.errorMessage$=(0,m.of)(null)}ngOnInit(){this.posts$=this.store.select(K),this.errorMessage$=this.store.select($),this.store.dispatch(P())}}return s.\u0275fac=function(o){return new(o||s)(t.Y36(r.yh))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-post-list"]],decls:7,vars:6,consts:[["title","Posts"],[1,"wrapper"],["class","blog-post pointable",3,"routerLink",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],[1,"blog-post","pointable",3,"routerLink"],["mat-card-md-image","","src","assets/img/blog-post.jpeg"],[1,"error-message"]],template:function(o,c){1&o&&(t._UZ(0,"app-toolbar",0),t.TgZ(1,"div",1),t._UZ(2,"app-search-posts"),t.YNc(3,R,6,5,"mat-card",2),t.ALo(4,"async"),t.YNc(5,W,2,1,"div",3),t.ALo(6,"async"),t.qZA()),2&o&&(t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,2,c.posts$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(6,4,c.errorMessage$)))},directives:[I.n,Q,g.sg,l.a8,h.rH,l.n5,l.dn,l.nc,g.O5],pipes:[g.Ov],styles:["div.context-menu[_ngcontent-%COMP%]{display:flex}"]}),s})()},{path:":id",component:(()=>{class s{constructor(o,c){this.store=o,this.route=c,this.currentPost$=(0,m.of)(null),this.errorMessage$=(0,m.of)(null)}ngOnInit(){this.route.params.subscribe(o=>{const c=+o.id;c&&(this.store.dispatch(S({id:c})),this.currentPost$=this.store.select(N),this.errorMessage$=this.store.select($))})}}return s.\u0275fac=function(o){return new(o||s)(t.Y36(r.yh),t.Y36(h.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-post-details"]],decls:4,vars:6,consts:[[4,"ngIf"],["class","error-message",4,"ngIf"],[3,"title"],[1,"wrapper"],[1,"blog-post"],["mat-card-lg-image","","src","assets/img/blog-post.jpeg"],[1,"post-comments-wrapper"],["class","post-comments",4,"ngFor","ngForOf"],[1,"post-comments"],[1,"error-message"]],template:function(o,c){1&o&&(t.YNc(0,w,11,3,"div",0),t.ALo(1,"async"),t.YNc(2,k,2,1,"div",1),t.ALo(3,"async")),2&o&&(t.Q6J("ngIf",t.lcZ(1,2,c.currentPost$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,c.errorMessage$)))},directives:[g.O5,I.n,l.a8,l.dn,l.WU,g.sg,l.n5,l.$j],pipes:[g.Ov],styles:[".post-comments-wrapper[_ngcontent-%COMP%]{padding-top:20px}.post-comments-wrapper[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{margin:5px 0}"]}),s})()}];let tt=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[h.Bz.forChild(_)],h.Bz]}),s})();var st=n(6705),ot=n(4466);let et=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[A],imports:[[g.ez,tt,st.q,ot.m,i.UX,r.Aw.forFeature(L,Y),p.sQ.forFeature([G])]]}),s})()}}]);