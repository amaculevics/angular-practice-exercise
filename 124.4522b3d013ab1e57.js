"use strict";(self.webpackChunkangular_practice_exercise=self.webpackChunkangular_practice_exercise||[]).push([[124],{2124:(x,f,a)=>{a.r(f),a.d(f,{GuestBookModule:()=>R});var m=a(9808),i=a(5620),p=a(9291),h=a(9646),r=a(3075),e=a(5e3),u=a(8966),c=a(7322),A=a(7531),Z=a(7423),v=a(5245);function k(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Name is required."),e.qZA())}function B(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"E-mail is required."),e.qZA())}function C(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"E-mail has wrong format."),e.qZA())}function N(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Message is required."),e.qZA())}let U=(()=>{class o{constructor(s,t){this.fb=s,this.dialogRef=t,this.form=new r.cw({})}ngOnInit(){this.form=this.fb.group({author:this.fb.group({name:this.fb.control("",[r.kI.required]),email:this.fb.control("",[r.kI.required,r.kI.email]),phone:this.fb.control("")}),message:this.fb.control("",r.kI.required)})}get name(){return this.form.get("author.name")}get email(){return this.form.get("author.email")}get phone(){return this.form.get("author.phone")}get message(){return this.form.get("message")}save(){this.form.markAllAsTouched(),this.form.valid&&this.dialogRef.close(this.form.value)}dismiss(){this.dialogRef.close()}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(r.qu),e.Y36(u.so))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-new-message-dialog"]],decls:34,vars:5,consts:[["mat-dialog-title",""],["autocomplete","off","novalidate","",1,"new-message-form",3,"formGroup"],["formGroupName","author"],["matInput","","id","name","type","text","formControlName","name"],[4,"ngIf"],["matInput","","type","text","formControlName","email"],["matInput","","id","name","type","text","formControlName","phone"],["matInput","","formControlName","message"],["mat-button","","color","primary",3,"click"]],template:function(s,t){1&s&&(e.TgZ(0,"h2",0),e._uU(1,"New Message"),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-form-field")(6,"mat-label"),e._uU(7,"Name:"),e.qZA(),e._UZ(8,"input",3),e.YNc(9,k,2,0,"mat-error",4),e.qZA(),e.TgZ(10,"mat-form-field")(11,"mat-label"),e._uU(12,"E-mail:"),e.qZA(),e._UZ(13,"input",5),e.YNc(14,B,2,0,"mat-error",4),e.YNc(15,C,2,0,"mat-error",4),e.qZA(),e.TgZ(16,"mat-form-field")(17,"mat-label"),e._uU(18,"Phone:"),e.qZA(),e._UZ(19,"input",6),e.qZA()(),e.TgZ(20,"mat-form-field")(21,"mat-label"),e._uU(22,"Message:"),e.qZA(),e._UZ(23,"textarea",7),e.YNc(24,N,2,0,"mat-error",4),e.qZA()()(),e.TgZ(25,"mat-dialog-actions")(26,"button",8),e.NdJ("click",function(){return t.save()}),e.TgZ(27,"mat-icon"),e._uU(28,"save"),e.qZA(),e._uU(29," Save "),e.qZA(),e.TgZ(30,"button",8),e.NdJ("click",function(){return t.dismiss()}),e.TgZ(31,"mat-icon"),e._uU(32,"cancel"),e.qZA(),e._uU(33," Cancel "),e.qZA()()),2&s&&(e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngIf",null==t.name?null:t.name.invalid),e.xp6(5),e.Q6J("ngIf",(null==t.email?null:t.email.invalid)&&(null==t.email||null==t.email.errors?null:t.email.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==t.email?null:t.email.invalid)&&(null==t.email||null==t.email.errors?null:t.email.errors.email)),e.xp6(9),e.Q6J("ngIf",(null==t.message?null:t.message.invalid)&&(null==t.message||null==t.message.errors?null:t.message.errors.required)))},directives:[u.uh,u.xY,r._Y,r.JL,r.sg,r.x0,c.KE,c.hX,A.Nt,r.Fj,r.JJ,r.u,m.O5,c.TO,u.H8,Z.lW,v.Hw],styles:[".new-message-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.new-message-form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:100%}"]}),o})();const G=(0,i.PH)("[Guest Book] Load"),M=(0,i.PH)("[Guest Book] Add new message",(0,i.Ky)()),I=(0,i.Lq)({messages:[]},(0,i.on)(M,(o,n)=>Object.assign(Object.assign({},o),{messages:[n.payload,...o.messages]}))),T="guest-book",b=(0,i.ZF)(T),q=(0,i.P1)(b,o=>o.messages);var J=a(7261),w=a(4423),d=a(2181),g=a(9224);function F(o,n){if(1&o&&(e.TgZ(0,"mat-card",8)(1,"mat-card-title"),e._uU(2),e.qZA(),e.TgZ(3,"mat-card-subtitle"),e._uU(4),e.qZA(),e.TgZ(5,"mat-card-content"),e._uU(6),e.qZA()()),2&o){const s=n.$implicit;e.xp6(2),e.hij(" ",s.author.name," "),e.xp6(2),e.hij(" ",s.author.email," "),e.xp6(2),e.hij(" ",s.message," ")}}function O(o,n){if(1&o&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&o){const s=n.ngIf;e.xp6(1),e.hij(" ",s," ")}}const Y=[{path:"",component:(()=>{class o{constructor(s,t,l){this.store=s,this.dialog=t,this.snackBar=l,this.guestBookMessages$=(0,h.of)([]),this.errorMessage$=(0,h.of)("")}ngOnInit(){this.store.dispatch(G()),this.guestBookMessages$=this.store.select(q)}addMessage(){this.dialog.open(U,{width:"450px"}).afterClosed().subscribe(t=>{t&&(this.store.dispatch(M({payload:t})),this.snackBar.open("Message added",void 0,{duration:5e3}))})}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(i.yh),e.Y36(u.uw),e.Y36(J.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-guest-book-list"]],decls:14,vars:7,consts:[["title","Guest Book"],["context-menu",""],["mat-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"wrapper"],["class","guest-book",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],[1,"guest-book"],[1,"error-message"]],template:function(s,t){if(1&s&&(e.TgZ(0,"app-toolbar",0)(1,"span",1)(2,"button",2)(3,"mat-icon"),e._uU(4,"more_vert"),e.qZA()(),e.TgZ(5,"mat-menu",null,3)(7,"button",4),e.NdJ("click",function(){return t.addMessage()}),e._uU(8,"Add Message"),e.qZA()()()(),e.TgZ(9,"div",5),e.YNc(10,F,7,3,"mat-card",6),e.ALo(11,"async"),e.YNc(12,O,2,1,"div",7),e.ALo(13,"async"),e.qZA()),2&s){const l=e.MAs(6);e.xp6(2),e.Q6J("matMenuTriggerFor",l),e.xp6(8),e.Q6J("ngForOf",e.lcZ(11,3,t.guestBookMessages$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(13,5,t.errorMessage$))}},directives:[w.n,Z.lW,d.p6,v.Hw,d.VK,d.OP,m.sg,g.a8,g.n5,g.$j,g.dn,m.O5],pipes:[m.Ov],styles:[""]}),o})()}];let L=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.Bz.forChild(Y)],p.Bz]}),o})();var j=a(6705),D=a(4466);let R=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.ez,L,j.q,D.m,r.UX,i.Aw.forFeature(T,I)]]}),o})()}}]);